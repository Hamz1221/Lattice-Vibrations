{"remainingRequest":"/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/node_modules/babel-loader/lib/index.js!/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/src/3D_d3canvas.js","dependencies":[{"path":"/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/src/3D_d3canvas.js","mtime":1597308207179},{"path":"/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnOwppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7CmltcG9ydCAqIGFzIG1hdGggZnJvbSAnLi9tYXRoLm1pbi5qcyc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHsKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vCiAgLy8gVmlzdWFsaXNhdGlvbiBPYmplY3QgICAgICAgICAgICAvLwogIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy8KICB3aW5kb3cuVmlzID0gd2luZG93LlZpcyB8fCB7fTsKCiAgVmlzLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICBWaXMuaXNSdW5uaW5nID0gZmFsc2U7CiAgICBWaXMuc2V0dXAuaW5pdENvbnN0cygpOwogICAgVmlzLnNldHVwLmluaXRWYXJzKCk7CiAgICBWaXMuc2V0dXAuaW5pdERpc3BsYXkoKTsKICAgIFZpcy5zZXR1cC5pbml0R3JhcGgoKTsKICAgIFZpcy5zZXR1cC5pbml0U2NlbmUoKTsKICAgIFZpcy5zZXR1cC5pbml0U2xpZGVycygpOwogICAgVmlzLnN0YXJ0KCk7CiAgfTsKCiAgVmlzLnN0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgaWYgKFZpcy5fc3RvcHRpbWUpIHsKICAgICAgVmlzLl90aGVuICs9IERhdGUubm93KCkgLSBWaXMuX3N0b3B0aW1lOyAvLyBhZGQgc3RvcHBlZCB0aW1lCiAgICB9CgogICAgaWYgKCFWaXMuaXNSdW5uaW5nKSB7CiAgICAgIFZpcy5jb3JlLmZyYW1lKCk7CiAgICAgIFZpcy5pc1J1bm5pbmcgPSB0cnVlOwogICAgfQogIH07CgogIFZpcy5zdG9wID0gZnVuY3Rpb24gKCkgewogICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKFZpcy5hbmltYXRpb25GcmFtZUxvb3ApOwogICAgVmlzLmlzUnVubmluZyA9IGZhbHNlOwogICAgVmlzLl9zdG9wdGltZSA9IERhdGUubm93KCk7IC8vIHJlY29yZCB3aGVuIGFuaW1hdGlvbiBwYXVzZWQKICB9OwoKICBWaXMuY29yZSA9IHsKICAgIGZyYW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIFZpcy50ID0gKERhdGUubm93KCkgLSBWaXMuX3RoZW4pIC8gNTAwOyAvLyB0aW1lIHNpbmNlIHN0YXJ0IGluIHNlY29uZHMKCiAgICAgIFZpcy5jb3JlLnVwZGF0ZSgpOwogICAgICBWaXMuY29yZS5hbmltYXRlKCk7CiAgICAgIFZpcy5hbmltYXRpb25GcmFtZUxvb3AgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKFZpcy5jb3JlLmZyYW1lKTsKICAgIH0sCiAgICB1cGRhdGU6IGZ1bmN0aW9uICgpIHsKICAgICAgVmlzLndvcmtlcnMuY2FsY1BhcmFtcygpOwogICAgICBWaXMud29ya2Vycy5jYWxjUG9zKCk7IC8vIFZpcy53b3JrZXJzLmNhbGNQaGFzZSgpOwogICAgfSwKICAgIGFuaW1hdGU6IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBWaXMuTjsgbisrKSB7CiAgICAgICAgVmlzLnNwaGVyZXNbbl0ucG9zaXRpb24uc2V0KFZpcy54W25dLCBWaXMueVtuXSwgVmlzLnpbbl0pOwogICAgICB9CgogICAgICBWaXMucmVuZGVyZXIucmVuZGVyKFZpcy5zY2VuZSwgVmlzLmNhbWVyYSk7CiAgICB9LAogICAgdXBkYXRlU2xpZGVyczogZnVuY3Rpb24gKCkgewogICAgICBWaXMuZHhSYW5nZS52YWx1ZSA9IFZpcy5keDsKICAgICAgVmlzLmR4RGlzcGxheS50ZXh0Q29udGVudCA9IE51bWJlcihWaXMuZHgpLnRvRml4ZWQoMik7CiAgICAgIFZpcy5keVJhbmdlLnZhbHVlID0gVmlzLmR5OwogICAgICBWaXMuZHlEaXNwbGF5LnRleHRDb250ZW50ID0gTnVtYmVyKFZpcy5keSkudG9GaXhlZCgyKTsKICAgICAgVmlzLmR6UmFuZ2UudmFsdWUgPSBWaXMuZHo7CiAgICAgIFZpcy5kekRpc3BsYXkudGV4dENvbnRlbnQgPSBOdW1iZXIoVmlzLmR6KS50b0ZpeGVkKDIpOwogICAgICBWaXMudWt4UmFuZ2UudmFsdWUgPSBWaXMudWt4OwogICAgICBWaXMudWt4RGlzcGxheS50ZXh0Q29udGVudCA9IE51bWJlcihWaXMudWt4KS50b0ZpeGVkKDIpOwogICAgICBWaXMudWt5UmFuZ2UudmFsdWUgPSBWaXMudWt5OwogICAgICBWaXMudWt5RGlzcGxheS50ZXh0Q29udGVudCA9IE51bWJlcihWaXMudWt5KS50b0ZpeGVkKDIpOwogICAgICBWaXMudWt6UmFuZ2UudmFsdWUgPSBWaXMudWt6OwogICAgICBWaXMudWt6RGlzcGxheS50ZXh0Q29udGVudCA9IE51bWJlcihWaXMudWt6KS50b0ZpeGVkKDIpOwogICAgICBWaXMuY29yZS51cGRhdGVEaXNwbGF5KCk7CiAgICB9LAogICAgdXBkYXRlRGlzcGxheTogZnVuY3Rpb24gKCkgewogICAgICBWaXMud29ya2Vycy5jYWxjUGFyYW1zKCk7CiAgICAgIGxldCB1a3ZlYyA9IFtWaXMudWt4LCBWaXMudWt5LCBWaXMudWt6XTsKICAgICAgbGV0IGt2ZWMgPSBbVmlzLmt4LCBWaXMua3ksIFZpcy5rel07CiAgICAgIGxldCBkb3Rwcm9kdWN0ID0gTWF0aC5yb3VuZCgxMDAgKiBNYXRoLmFicyhtYXRoLmRvdChrdmVjLCB1a3ZlYykpKSAvIDEwMDsKICAgICAgVmlzLmRvdERpc3BsYXkudGV4dENvbnRlbnQgPSBkb3Rwcm9kdWN0LnRvU3RyaW5nKCk7CiAgICAgIGxldCBjcm9zc3Byb2R1Y3QgPSBNYXRoLnJvdW5kKE1hdGguYWJzKDEwMCAqIE1hdGgucG93KE1hdGgucG93KG1hdGguY3Jvc3Moa3ZlYywgdWt2ZWMpWzBdLCAyKSArIE1hdGgucG93KG1hdGguY3Jvc3Moa3ZlYywgdWt2ZWMpWzFdLCAyKSArIE1hdGgucG93KG1hdGguY3Jvc3Moa3ZlYywgdWt2ZWMpWzJdLCAyKSwgMC41KSkpIC8gMTAwOwogICAgICBWaXMuY3Jvc3NEaXNwbGF5LnRleHRDb250ZW50ID0gY3Jvc3Nwcm9kdWN0LnRvU3RyaW5nKCk7CiAgICB9CiAgfTsKICBWaXMud29ya2VycyA9IHsKICAgIGNhbGNQYXJhbXM6IGZ1bmN0aW9uICgpIHsKICAgICAgVmlzLmsgPSBNYXRoLnNxcnQoVmlzLmt4ICoqIDIgKyBWaXMua3kgKiogMiArIFZpcy5reiAqKiAyKTsKICAgICAgVmlzLmt4ID0gVmlzLmR4ICogTWF0aC5QSSAvIFZpcy5hOwogICAgICBWaXMua3kgPSBWaXMuZHkgKiBNYXRoLlBJIC8gVmlzLmE7CiAgICAgIFZpcy5reiA9IFZpcy5keiAqIE1hdGguUEkgLyBWaXMuYTsKICAgICAgVmlzLncgPSAyICogVmlzLmR3ICogTWF0aC5zcXJ0KE1hdGguc2luKFZpcy5reCAqIFZpcy5hIC8gMikgKiogMiArIE1hdGguc2luKFZpcy5reSAqIFZpcy5hIC8gMikgKiogMiArIE1hdGguc2luKFZpcy5reiAqIFZpcy5hIC8gMikgKiogMik7CiAgICAgIFZpcy5kcGhhc2UgPSAyICogTWF0aC5QSSAvIFZpcy5rOyAvLyB1cGRhdGUgc3BhY2luZyBvZiBwaGFzZSB0cmFja2VyIAogICAgfSwKICAgIGNhbGNQb3M6IGZ1bmN0aW9uICgpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBWaXMuTng7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgVmlzLk55OyBqKyspIHsKICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgVmlzLk56OyBrKyspIHsKICAgICAgICAgICAgbGV0IG4gPSBWaXMuTnkgKiBWaXMuTnogKiBpICsgVmlzLk56ICogaiArIGs7CiAgICAgICAgICAgIGxldCBvZmZzZXQgPSBNYXRoLmNvcyhWaXMua3ggKiBWaXMuYSAqIGkgKyBWaXMua3kgKiBWaXMuYSAqIGogKyBWaXMua3ogKiBWaXMuYSAqIGsgLSBWaXMudyAqIFZpcy50KTsKICAgICAgICAgICAgVmlzLnhbbl0gPSBpICogVmlzLmEgKyBWaXMudWt4ICogb2Zmc2V0OwogICAgICAgICAgICBWaXMueVtuXSA9IGogKiBWaXMuYSArIFZpcy51a3kgKiBvZmZzZXQ7CiAgICAgICAgICAgIFZpcy56W25dID0gayAqIFZpcy5hICsgVmlzLnVreiAqIG9mZnNldDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjYWxjUGhhc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IHYgPSBWaXMudyAvIFZpcy5rOwogICAgICBsZXQgdnggPSB2ICogVmlzLmt4IC8gVmlzLms7CiAgICAgIGxldCB2eSA9IHYgKiBWaXMua3kgLyBWaXMuazsKICAgICAgbGV0IHZ6ID0gdiAqIFZpcy5reiAvIFZpcy5rOwogICAgICBsZXQgbSA9IHZ5IC8gdng7CiAgICAgIHZhciBzcGFjaW5nOwogICAgICB2YXIgdF9zcGFjZTsKCiAgICAgIGlmIChtID49IC0xICYmIG0gPD0gMSkgewogICAgICAgIC8vIGRvIHkgcHJvY2Vzc2luZwogICAgICAgIHNwYWNpbmcgPSBWaXMuZHBoYXNlICogVmlzLmt5IC8gVmlzLms7IC8vIGRpc3RhbmNlIGJldHdlZW4gcGhhc2VzIAoKICAgICAgICB0X3NwYWNlID0gc3BhY2luZyAvIHZ5OwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGRvIHggcHJvY2Vzc2luZwogICAgICAgIHNwYWNpbmcgPSBWaXMuZHBoYXNlICogVmlzLmt4IC8gVmlzLms7CiAgICAgICAgdF9zcGFjZSA9IHNwYWNpbmcgLyB2eDsKICAgICAgfQoKICAgICAgbGV0IHQgPSBWaXMudCAlIChWaXMuTnggKiB0X3NwYWNlIC8gMik7IC8vIGhldXJpc3RpYyAjIG9mIHRpbWUgc3BhY2luZ3MgdW50aWwgd3JhcCBhcm91bmQgCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFZpcy5OcGhhc2U7IGkrKykgewogICAgICAgIGxldCBUID0gdCArIChpIC0gVmlzLk5waGFzZSAvIDIpICogdF9zcGFjZTsgLy8gc2hpZnQgZWFjaCBwaGFzZSBwYXJ0aWNsZSAKCiAgICAgICAgaWYgKG0gPj0gLTEgJiYgbSA8PSAxKSB7CiAgICAgICAgICAvLyBkbyB4IHByb2Nlc3NpbmcKICAgICAgICAgIFZpcy5waGFzZXhbaV0gPSBUICogdng7CiAgICAgICAgICBWaXMucGhhc2V5W2ldID0gbSAqIChUICogdnggLSBWaXMuTnggKiBWaXMuYSAvIDIpICsgVmlzLk55ICogVmlzLmEgLyAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBkbyB5IHByb2Nlc3NpbmcKICAgICAgICAgIFZpcy5waGFzZXhbaV0gPSAxIC8gbSAqIChUICogdnkgLSBWaXMuTnkgKiBWaXMuYSAvIDIpICsgVmlzLk54ICogVmlzLmEgLyAyOwogICAgICAgICAgVmlzLnBoYXNleVtpXSA9IFQgKiB2eTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwogIFZpcy5zZXR1cCA9IHsKICAgIGluaXRDb25zdHM6IGZ1bmN0aW9uICgpIHsKICAgICAgVmlzLmEgPSAxOyAvLyBhdG9taWMgc3BhY2luZwoKICAgICAgVmlzLmR3ID0gMTsgLy8gZGVieWUgd2F2ZWxlbmd0aAoKICAgICAgVmlzLk54ID0gMTA7IC8vICMgb2YgYXRvbXMgaW4geCBkaXJlY3Rpb24KCiAgICAgIFZpcy5OeSA9IDEwOyAvLyAjIG9mIGF0b21zIGluIHkgZGlyZWN0aW9uCgogICAgICBWaXMuTnogPSAxMDsgLy8gIyBvZiBhdG9tcyBpbiB6IGRpcmVjdGlvbgoKICAgICAgVmlzLk4gPSBWaXMuTnggKiBWaXMuTnkgKiBWaXMuTno7CiAgICAgIFZpcy5OcGhhc2UgPSAyICogVmlzLk54OwogICAgICBWaXMuY2FudmFzeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLXZpcycpLm9mZnNldFdpZHRoOwogICAgICBWaXMuY2FudmFzeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLXZpcycpLm9mZnNldEhlaWdodDsKICAgICAgVmlzLnBvaW50UiA9IDAuMTAgKiBWaXMuYTsKICAgIH0sCiAgICBpbml0VmFyczogZnVuY3Rpb24gKCkgewogICAgICBWaXMuX3RoZW4gPSBEYXRlLm5vdygpOwogICAgICBWaXMuZHggPSAwLjU7IC8vICUgb2YgbWF4IHggd2F2ZW51bWJlciwgKC0xLCAxKQoKICAgICAgVmlzLmR5ID0gMDsgLy8gJSBvZiBtYXggeSB3YXZlbnVtYmVyLCAoLTEsIDEpCgogICAgICBWaXMuZHogPSAwOyAvLyAlIG9mIG1heCB6IHdhdmVudW1iZXIsICgtMSwgMSkKCiAgICAgIFZpcy51a3ggPSAwOyAvLyB4IGFtcGxpdHVkZQoKICAgICAgVmlzLnVreSA9IDA7IC8vIHkgYW1wbGl0dWRlCgogICAgICBWaXMudWt6ID0gMC41OyAvLyB6IGFtcGxpdHVkZQoKICAgICAgVmlzLnggPSBuZXcgQXJyYXkoVmlzLk4pOwogICAgICBWaXMueSA9IG5ldyBBcnJheShWaXMuTik7CiAgICAgIFZpcy56ID0gbmV3IEFycmF5KFZpcy5OKTsKICAgICAgVmlzLnNwaGVyZXMgPSBuZXcgQXJyYXkoVmlzLk4pOwogICAgICBWaXMucGhhc2V4ID0gbmV3IEFycmF5KFZpcy5OcGhhc2UpOwogICAgICBWaXMucGhhc2V5ID0gbmV3IEFycmF5KFZpcy5OcGhhc2UpOwogICAgICBWaXMucGhhc2V6ID0gbmV3IEFycmF5KFZpcy5OcGhhc2UpOwogICAgfSwKICAgIGluaXRHcmFwaDogZnVuY3Rpb24gKCkgewogICAgICBWaXMuY2FudmFzID0gZDMuc2VsZWN0KCcjbWFpbi12aXMnKS5hcHBlbmQoJ2NhbnZhcycpLmF0dHIoJ3dpZHRoJywgVmlzLmNhbnZhc3gpLmF0dHIoJ2hlaWdodCcsIFZpcy5jYW52YXN5KTsKICAgICAgVmlzLmNvbnRleHQgPSBWaXMuY2FudmFzLm5vZGUoKS5nZXRDb250ZXh0KCcyZCcpOwogICAgICBWaXMuY29udmVydENhbnZhc1ggPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgVmlzLk54ICogVmlzLmFdKS5yYW5nZShbMCwgVmlzLmNhbnZhc3hdKTsKICAgICAgVmlzLmNvbnZlcnRDYW52YXNZID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIFZpcy5OeSAqIFZpcy5hXSkucmFuZ2UoW1Zpcy5jYW52YXN5LCAwXSk7CiAgICB9LAogICAgaW5pdFNjZW5lOiBmdW5jdGlvbiAoKSB7CiAgICAgIFZpcy5zY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOwogICAgICBWaXMuc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5Db2xvcigweGZmZmZmZik7CiAgICAgIFZpcy5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIFZpcy5jYW52YXN4IC8gVmlzLmNhbnZhc3ksIDAuMSwgMTAwMCk7CiAgICAgIFZpcy5jYW1lcmEucG9zaXRpb24uc2V0KC0wLjgsIC0wLjYsIC0wLjgpOwogICAgICBWaXMuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7CiAgICAgIFZpcy5yZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsKICAgICAgICBhbnRpYWxpYXM6IHRydWUsCiAgICAgICAgY2FudmFzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzLWRpdicpCiAgICAgIH0pOwogICAgICBWaXMucmVuZGVyZXIuc2V0U2l6ZShWaXMuY2FudmFzeCwgVmlzLmNhbnZhc3kpOyAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzLWRpdicpLmFwcGVuZENoaWxkKFZpcy5yZW5kZXJlci5kb21FbGVtZW50KTsKCiAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgVmlzLk47IG4rKykgewogICAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5TcGhlcmVCdWZmZXJHZW9tZXRyeShWaXMucG9pbnRSLCAxMCwgMTApOwogICAgICAgIGxldCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7CiAgICAgICAgICBjb2xvcjogbmV3IFRIUkVFLkNvbG9yKCJoc2woIiArIE51bWJlcigzNjAgKiBuIC8gKFZpcy5OIC0gMSkpLnRvRml4ZWQoMikgKyAiLCA2MCUsIDUyJSkiKQogICAgICAgIH0pOwogICAgICAgIGxldCBzcGhlcmUgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpOwogICAgICAgIFZpcy5zcGhlcmVzW25dID0gc3BoZXJlOwogICAgICAgIFZpcy5zY2VuZS5hZGQoc3BoZXJlKTsKICAgICAgfQogICAgfSwKICAgIGluaXRCdXR0b246IGZ1bmN0aW9uICgpIHsKICAgICAgVmlzLmJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1zdG9wJyk7CiAgICAgIFZpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKFZpcy5pc1J1bm5pbmcpIHsKICAgICAgICAgIFZpcy5zdG9wKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIFZpcy5zdGFydCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaW5pdFNsaWRlcnM6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gciBzbGlkZXJzCiAgICAgIFZpcy5keFJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R4Jyk7CiAgICAgIFZpcy5keERpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHgtZGlzcGxheScpOwogICAgICBWaXMuZHhSYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBWaXMuZHggPSBWaXMuZHhSYW5nZS52YWx1ZTsKICAgICAgICBWaXMuZHhEaXNwbGF5LnRleHRDb250ZW50ID0gVmlzLmR4OwogICAgICAgIFZpcy5jb3JlLnVwZGF0ZURpc3BsYXkoKTsKICAgICAgfSk7CiAgICAgIFZpcy5keVJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R5Jyk7CiAgICAgIFZpcy5keURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHktZGlzcGxheScpOwogICAgICBWaXMuZHlSYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBWaXMuZHkgPSBWaXMuZHlSYW5nZS52YWx1ZTsKICAgICAgICBWaXMuZHlEaXNwbGF5LnRleHRDb250ZW50ID0gVmlzLmR5OwogICAgICAgIFZpcy5jb3JlLnVwZGF0ZURpc3BsYXkoKTsKICAgICAgfSk7CiAgICAgIFZpcy5kelJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R6Jyk7CiAgICAgIFZpcy5kekRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHotZGlzcGxheScpOwogICAgICBWaXMuZHpSYW5nZS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICBWaXMuZHogPSBWaXMuZHpSYW5nZS52YWx1ZTsKICAgICAgICBWaXMuZHpEaXNwbGF5LnRleHRDb250ZW50ID0gVmlzLmR6OwogICAgICAgIFZpcy5jb3JlLnVwZGF0ZURpc3BsYXkoKTsKICAgICAgfSk7IC8vIHUgc2xpZGVycwoKICAgICAgVmlzLnVreFJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VreCcpOwogICAgICBWaXMudWt4RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1a3gtZGlzcGxheScpOwogICAgICBWaXMudWt4UmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgVmlzLnVreCA9IFZpcy51a3hSYW5nZS52YWx1ZTsKICAgICAgICBWaXMudWt4RGlzcGxheS50ZXh0Q29udGVudCA9IFZpcy51a3g7CiAgICAgICAgVmlzLmNvcmUudXBkYXRlRGlzcGxheSgpOwogICAgICB9KTsKICAgICAgVmlzLnVreVJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VreScpOwogICAgICBWaXMudWt5RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1a3ktZGlzcGxheScpOwogICAgICBWaXMudWt5UmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgVmlzLnVreSA9IFZpcy51a3lSYW5nZS52YWx1ZTsKICAgICAgICBWaXMudWt5RGlzcGxheS50ZXh0Q29udGVudCA9IFZpcy51a3k7CiAgICAgICAgVmlzLmNvcmUudXBkYXRlRGlzcGxheSgpOwogICAgICB9KTsKICAgICAgVmlzLnVrelJhbmdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VreicpOwogICAgICBWaXMudWt6RGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1a3otZGlzcGxheScpOwogICAgICBWaXMudWt6UmFuZ2UuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgVmlzLnVreiA9IFZpcy51a3pSYW5nZS52YWx1ZTsKICAgICAgICBWaXMudWt6RGlzcGxheS50ZXh0Q29udGVudCA9IFZpcy51a3o7CiAgICAgICAgVmlzLmNvcmUudXBkYXRlRGlzcGxheSgpOwogICAgICB9KTsKICAgICAgVmlzLmNvcmUudXBkYXRlU2xpZGVycygpOwogICAgfSwKICAgIGluaXREaXNwbGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgIFZpcy5kb3REaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRvdHByb2R1Y3QiKTsKICAgICAgVmlzLmNyb3NzRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjcm9zc3Byb2R1Y3QiKTsKICAgIH0KICB9OwogIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBWaXMuaW5pdCk7Cn0="},{"version":3,"sources":["/Users/darrenlean/Documents/Visualisations/Lattice-Vibrations/lattice-vibrations-vue/src/3D_d3canvas.js"],"names":["d3","THREE","math","window","Vis","init","isRunning","setup","initConsts","initVars","initDisplay","initGraph","initScene","initSliders","start","_stoptime","_then","Date","now","core","frame","stop","cancelAnimationFrame","animationFrameLoop","t","update","animate","requestAnimationFrame","workers","calcParams","calcPos","n","N","spheres","position","set","x","y","z","renderer","render","scene","camera","updateSliders","dxRange","value","dx","dxDisplay","textContent","Number","toFixed","dyRange","dy","dyDisplay","dzRange","dz","dzDisplay","ukxRange","ukx","ukxDisplay","ukyRange","uky","ukyDisplay","ukzRange","ukz","ukzDisplay","updateDisplay","ukvec","kvec","kx","ky","kz","dotproduct","Math","round","abs","dot","dotDisplay","toString","crossproduct","pow","cross","crossDisplay","k","sqrt","PI","a","w","dw","sin","dphase","i","Nx","j","Ny","Nz","offset","cos","calcPhase","v","vx","vy","vz","m","spacing","t_space","Nphase","T","phasex","phasey","canvasx","document","getElementById","offsetWidth","canvasy","offsetHeight","pointR","Array","phasez","canvas","select","append","attr","context","node","getContext","convertCanvasX","scaleLinear","domain","range","convertCanvasY","Scene","background","Color","PerspectiveCamera","lookAt","Vector3","WebGLRenderer","antialias","setSize","geometry","SphereBufferGeometry","material","MeshBasicMaterial","color","sphere","Mesh","add","initButton","button","addEventListener"],"mappings":"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","sourcesContent":["import * as d3 from 'd3';\nimport * as THREE from 'three';\nimport * as math from './math.min.js';\n\nexport default function() {\n\n//---------------------------------//\n// Visualisation Object            //\n//---------------------------------//\n\nwindow.Vis = window.Vis || {};\n\nVis.init = function() {\n    Vis.isRunning = false;\n\n    Vis.setup.initConsts();\n    Vis.setup.initVars();\n\n    Vis.setup.initDisplay();\n    Vis.setup.initGraph();\n    Vis.setup.initScene();\n\n    Vis.setup.initSliders();\n\n    Vis.start();\n};\n\nVis.start = function() {\n    if (Vis._stoptime) {\n        Vis._then += Date.now() - Vis._stoptime; // add stopped time\n    }\n\n    if (!Vis.isRunning) {\n        Vis.core.frame();\n        Vis.isRunning = true;\n    }\n};\n\nVis.stop = function() {\n    window.cancelAnimationFrame(Vis.animationFrameLoop);\n    Vis.isRunning = false;\n    Vis._stoptime = Date.now(); // record when animation paused\n};\n\nVis.core = {\n    frame: function() {\n        Vis.t = (Date.now() - Vis._then) / 500; // time since start in seconds\n\n        Vis.core.update();\n        Vis.core.animate();\n\n        Vis.animationFrameLoop = window.requestAnimationFrame(Vis.core.frame);\n    },\n\n    update: function() {\n        Vis.workers.calcParams();\n        Vis.workers.calcPos();\n        // Vis.workers.calcPhase();\n    },\n\n    animate: function() {\n        for (let n=0; n<Vis.N; n++) {\n            Vis.spheres[n].position.set(Vis.x[n], Vis.y[n], Vis.z[n]);\n        }\n\n        Vis.renderer.render(Vis.scene, Vis.camera);\n        \n    },\n\n    updateSliders: function() {\n        Vis.dxRange.value = Vis.dx;\n        Vis.dxDisplay.textContent = Number(Vis.dx).toFixed(2);\n\n        Vis.dyRange.value = Vis.dy;\n        Vis.dyDisplay.textContent = Number(Vis.dy).toFixed(2);\n\n        Vis.dzRange.value = Vis.dz;\n        Vis.dzDisplay.textContent = Number(Vis.dz).toFixed(2);\n\n\n        Vis.ukxRange.value = Vis.ukx;\n        Vis.ukxDisplay.textContent = Number(Vis.ukx).toFixed(2);\n\n        Vis.ukyRange.value = Vis.uky;\n        Vis.ukyDisplay.textContent = Number(Vis.uky).toFixed(2);\n\n        Vis.ukzRange.value = Vis.ukz;\n        Vis.ukzDisplay.textContent = Number(Vis.ukz).toFixed(2);\n\n        Vis.core.updateDisplay();\n    },\n\n    updateDisplay: function() {\n        Vis.workers.calcParams();\n\n        let ukvec = [Vis.ukx, Vis.uky, Vis.ukz];\n        let kvec = [Vis.kx, Vis.ky, Vis.kz];\n\n        let dotproduct = Math.round(100*Math.abs(math.dot(kvec, ukvec)))/100;\n        Vis.dotDisplay.textContent = dotproduct.toString();\n\n        let crossproduct = Math.round(Math.abs(100*Math.pow((Math.pow(math.cross(kvec, ukvec)[0], 2) + Math.pow(math.cross(kvec, ukvec)[1], 2) + Math.pow(math.cross(kvec, ukvec)[2], 2)), 0.5)))/100;\n        Vis.crossDisplay.textContent = crossproduct.toString();\n    }\n};\n\nVis.workers = {\n    calcParams: function() {\n        Vis.k = Math.sqrt(Vis.kx**2 + Vis.ky**2 + Vis.kz**2);\n        Vis.kx = Vis.dx * Math.PI / Vis.a;\n        Vis.ky = Vis.dy * Math.PI / Vis.a;\n        Vis.kz = Vis.dz * Math.PI / Vis.a;\n\n        Vis.w = 2 * Vis.dw * Math.sqrt(Math.sin(Vis.kx * Vis.a / 2)**2 + Math.sin(Vis.ky * Vis.a / 2)**2 + Math.sin(Vis.kz * Vis.a / 2)**2);\n\n        Vis.dphase = 2*Math.PI/Vis.k; // update spacing of phase tracker \n    },\n\n    calcPos: function() {\n        for (let i=0; i < Vis.Nx; i++) {\n            for (let j=0; j < Vis.Ny; j++) {\n                for (let k=0; k < Vis.Nz; k++) {\n                    let n = Vis.Ny*Vis.Nz*i + Vis.Nz*j + k;\n                    let offset = Math.cos( Vis.kx*Vis.a*i + Vis.ky*Vis.a*j + Vis.kz*Vis.a*k - Vis.w*Vis.t);\n    \n                    Vis.x[n] = i*Vis.a + Vis.ukx * offset;\n                    Vis.y[n] = j*Vis.a + Vis.uky * offset;\n                    Vis.z[n] = k*Vis.a + Vis.ukz * offset;\n                }\n            }\n        }\n    },\n\n    calcPhase: function() {\n        let v = Vis.w / Vis.k;\n        let vx = v * Vis.kx / Vis.k;\n        let vy = v * Vis.ky / Vis.k;\n        let vz = v * Vis.kz / Vis.k;\n\n        let m = vy / vx;\n\n        var spacing;\n        var t_space;\n        if (m >= -1 && m <= 1) {\n            // do y processing\n            spacing = Vis.dphase * Vis.ky / Vis.k; // distance between phases \n            t_space = spacing / vy;\n        } else {\n            // do x processing\n            spacing = Vis.dphase * Vis.kx / Vis.k;\n            t_space = spacing / vx;\n        }\n\n        let t = Vis.t % (Vis.Nx*t_space/2); // heuristic # of time spacings until wrap around \n\n        for (let i=0; i < Vis.Nphase; i++) {\n            let T = t + (i - Vis.Nphase/2)*t_space; // shift each phase particle \n\n            if (m >= -1 && m <= 1) {\n                // do x processing\n                Vis.phasex[i] = T*vx;\n                Vis.phasey[i] = (m)*(T*vx - Vis.Nx*Vis.a/2) + Vis.Ny*Vis.a/2;\n            } else {\n                // do y processing\n                Vis.phasex[i] = (1/m)*(T*vy - Vis.Ny*Vis.a/2) + Vis.Nx*Vis.a/2;\n                Vis.phasey[i] = T*vy;\n            }\n\n            \n        }\n    }\n};\n\nVis.setup = {\n    initConsts: function() {\n        Vis.a = 1; // atomic spacing\n        Vis.dw = 1; // debye wavelength\n\n        Vis.Nx = 10; // # of atoms in x direction\n        Vis.Ny = 10; // # of atoms in y direction\n        Vis.Nz = 10; // # of atoms in z direction\n        Vis.N = Vis.Nx * Vis.Ny * Vis.Nz;\n\n        Vis.Nphase = 2*Vis.Nx;\n\n        Vis.canvasx = document.getElementById('main-vis').offsetWidth;\n        Vis.canvasy = document.getElementById('main-vis').offsetHeight;\n\n        Vis.pointR = 0.10 * Vis.a;\n    },\n\n    initVars: function() {\n        Vis._then = Date.now();\n\n        Vis.dx = 0.5; // % of max x wavenumber, (-1, 1)\n        Vis.dy = 0; // % of max y wavenumber, (-1, 1)\n        Vis.dz = 0; // % of max z wavenumber, (-1, 1)\n\n        Vis.ukx = 0; // x amplitude\n        Vis.uky = 0; // y amplitude\n        Vis.ukz = 0.5; // z amplitude\n\n        Vis.x = new Array(Vis.N);\n        Vis.y = new Array(Vis.N);\n        Vis.z = new Array(Vis.N);\n        Vis.spheres = new Array(Vis.N);\n\n        Vis.phasex = new Array(Vis.Nphase);\n        Vis.phasey = new Array(Vis.Nphase);\n        Vis.phasez = new Array(Vis.Nphase);\n    },\n\n    initGraph: function() {\n        Vis.canvas = d3.select('#main-vis')\n                       .append('canvas')\n                        .attr('width', Vis.canvasx)\n                        .attr('height', Vis.canvasy);\n        Vis.context = Vis.canvas.node().getContext('2d');\n\n        Vis.convertCanvasX = d3.scaleLinear()\n                                .domain([0, Vis.Nx*Vis.a])\n                                .range([0, Vis.canvasx]);\n        Vis.convertCanvasY = d3.scaleLinear()\n                                .domain([0, Vis.Ny*Vis.a])\n                                .range([Vis.canvasy, 0]);\n    },\n\n    initScene: function() {\n        Vis.scene = new THREE.Scene();\n        Vis.scene.background = new THREE.Color( 0xffffff );\n        \n        Vis.camera = new THREE.PerspectiveCamera( 75, Vis.canvasx/Vis.canvasy, 0.1, 1000 );\n        Vis.camera.position.set(-0.8, -0.6, -0.8);\n        Vis.camera.lookAt(new THREE.Vector3(0,0,0));\n\n        Vis.renderer = new THREE.WebGLRenderer({ \n            antialias: true,\n            canvas: document.getElementById('canvas-div')\n        });\n        Vis.renderer.setSize(Vis.canvasx, Vis.canvasy);\n        // document.getElementById('canvas-div').appendChild(Vis.renderer.domElement);\n\n        for (let n=0; n<Vis.N; n++) {\n            let geometry = new THREE.SphereBufferGeometry(Vis.pointR, 10, 10);\n            let material = new THREE.MeshBasicMaterial( { \n                color: new THREE.Color(\"hsl(\" + Number(360*n/(Vis.N-1)).toFixed(2) + \", 60%, 52%)\") \n            } );\n            let sphere = new THREE.Mesh( geometry, material );\n            Vis.spheres[n] = sphere;\n            \n            Vis.scene.add(sphere);\n        }\n    },\n\n    initButton: function() {\n        Vis.button = document.getElementById('start-stop');\n\n        Vis.button.addEventListener('click', function() {\n            if (Vis.isRunning) {\n                Vis.stop();\n            } else {\n                Vis.start();\n            }\n        });\n    },\n\n    initSliders: function() {\n        // r sliders\n        Vis.dxRange = document.getElementById('dx');\n        Vis.dxDisplay = document.getElementById('dx-display');\n\n        Vis.dxRange.addEventListener('input', function() {\n            Vis.dx = Vis.dxRange.value;\n            Vis.dxDisplay.textContent = Vis.dx;\n\n            Vis.core.updateDisplay();\n        });\n\n        Vis.dyRange = document.getElementById('dy');\n        Vis.dyDisplay = document.getElementById('dy-display');\n\n        Vis.dyRange.addEventListener('input', function() {\n            Vis.dy = Vis.dyRange.value;\n            Vis.dyDisplay.textContent = Vis.dy;\n\n            Vis.core.updateDisplay();\n        });\n\n        Vis.dzRange = document.getElementById('dz');\n        Vis.dzDisplay = document.getElementById('dz-display');\n\n        Vis.dzRange.addEventListener('input', function() {\n            Vis.dz = Vis.dzRange.value;\n            Vis.dzDisplay.textContent = Vis.dz;\n\n            Vis.core.updateDisplay();\n        });\n\n        // u sliders\n        Vis.ukxRange = document.getElementById('ukx');\n        Vis.ukxDisplay = document.getElementById('ukx-display');\n\n        Vis.ukxRange.addEventListener('input', function() {\n            Vis.ukx = Vis.ukxRange.value;\n            Vis.ukxDisplay.textContent = Vis.ukx;\n\n            Vis.core.updateDisplay();\n        });\n\n        Vis.ukyRange = document.getElementById('uky');\n        Vis.ukyDisplay = document.getElementById('uky-display');\n\n        Vis.ukyRange.addEventListener('input', function() {\n            Vis.uky = Vis.ukyRange.value;\n            Vis.ukyDisplay.textContent = Vis.uky;\n\n            Vis.core.updateDisplay();\n        });\n\n        Vis.ukzRange = document.getElementById('ukz');\n        Vis.ukzDisplay = document.getElementById('ukz-display');\n\n        Vis.ukzRange.addEventListener('input', function() {\n            Vis.ukz = Vis.ukzRange.value;\n            Vis.ukzDisplay.textContent = Vis.ukz;\n\n            Vis.core.updateDisplay();\n        });\n\n        Vis.core.updateSliders();\n    },\n\n    initDisplay: function() {\n        Vis.dotDisplay = document.getElementById(\"dotproduct\");\n        Vis.crossDisplay = document.getElementById(\"crossproduct\");\n    }\n};\n\ndocument.addEventListener('DOMContentLoaded', Vis.init);\n}"]}]}