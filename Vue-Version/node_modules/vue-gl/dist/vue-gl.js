!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],e):e((t=t||self).VueGL={},t.THREE)}(this,(function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,i){return(c=h()?Reflect.construct:function(t,e,i){var s=[null];s.push.apply(s,e);var n=new(Function.bind.apply(t,s));return i&&l(n,i.prototype),n}).apply(null,arguments)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],s=!0,n=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(t){n=!0,a=t}finally{try{s||null==o.return||o.return()}finally{if(n)throw a}}return i}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var m=function(){function t(e){i(this,t),this.parent=e,this.children=[],this.hash=Object.create(null),this.listeners=Object.create(null),this.globalListeners=[],e&&e.children.push(this)}return n(t,[{key:"listen",value:function(t,e){"function"==typeof t?this.globalListeners.includes(t)||this.globalListeners.push(t):t in this.listeners?this.listeners[t].includes(e)||this.listeners[t].push(e):this.listeners[t]=[e]}},{key:"unlisten",value:function(t,e){if("function"==typeof t){var i=this.globalListeners.indexOf(t);i>=0&&this.globalListeners.splice(i,1)}else{var s=this.listeners[t];if(s)if(s.length>1){var n=s.indexOf(e);n>=0&&s.splice(n,1)}else s[0]===e&&delete this.listeners[t]}}},{key:"get",value:function(t){return t in this.hash?this.hash[t]:this.parent&&this.parent.get(t)}},{key:"set",value:function(t,e){this.hash[t]!==e&&(this.hash[t]=e,this.emit(t,e))}},{key:"keys",value:function(){var t=this,e=Object.keys(this.hash);if(!this.parent)return e;var i=this.parent.keys().filter((function(e){return!(e in t.hash)}));return[].concat(p(i),p(e))}},{key:"delete",value:function(t,e){this.hash[t]===e&&(delete this.hash[t],this.emit(t,this.parent&&this.parent.get(t)))}},{key:"emit",value:function(t,e){var i=this;t in this.listeners&&this.listeners[t].forEach((function(t){return t(e)})),this.children.forEach((function(i){t in i.hash||i.emit(t,e)})),this.globalListeners.forEach((function(t){return t(i)}))}},{key:"destroy",value:function(){if(this.parent){var t=this.parent.children;t.splice(t.indexOf(this),1)}}},{key:"fork",value:function(){return new t(this)}}]),t}(),g={inject:{vglNamespace:{default:function(){return{cameras:new m,scenes:new m}}}},provide:function(){var t=this.vglNamespace,e=t.geometries,i=t.materials,s=t.textures,n=t.object3ds,a=t.curves;return{vglNamespace:Object.create(this.vglNamespace,{geometries:{value:e?e.fork():new m},materials:{value:i?i.fork():new m},textures:{value:s?s.fork():new m},object3ds:{value:n?n.fork():new m},curves:{value:a?a.fork():new m}})}},beforeDestroy:function(){var t=this.vglNamespace,e=t.geometries,i=t.materials,s=t.textures,n=t.object3ds,a=t.curves;e&&e.destroy(),i&&i.destroy(),s&&s.destroy(),n&&n.destroy(),a&&a.destroy()},render:function(t){return this.$slots.default?t("div",this.$slots.default):void 0}},v=function(){function t(e,s){i(this,t),this.listeners=e?e.listeners:[],this.inst=s||function(){}}return n(t,[{key:"listen",value:function(t){this.listeners.includes(t)||this.listeners.push(t)}},{key:"unlisten",value:function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}},{key:"emit",value:function(){this.listeners.forEach((function(t){return t()}))}}]),t}();function y(t){return Array.isArray(t)?t:t.trim().split(/\s+/)}function b(t){return t.isColor?t:new e.Color(t)}function w(t){if(t.isVector2)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Vector2,p(i.map(parseFloat)))}function S(t){if(t.isVector3)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Vector3,p(i.map(parseFloat)))}function F(t){if(t.isEuler)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Euler,p(i.slice(0,3).map(parseFloat)).concat([i[3]]))}function j(t){if(t.isQuaternion)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Quaternion,p(i.map(parseFloat)))}function N(t){if(t instanceof e.Spherical)return t;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return c(e.Spherical,p(i.map(parseFloat))).makeSafe()}function x(t){return Array.isArray(t)?t:t.split(",")}function O(t){var e=Array.isArray(t);return e&&t.every((function(t){return t.isVector2}))?t:(e?t:t.split(",")).map(w)}function A(t){return t.isFog?t:c(e.Fog,p(t.trim().split(/\s+/).map((function(t,e){return 0===e?t:parseFloat(t)}))))}var L=Boolean,V=[String,Number],M=[String,Number],k=String,R=String,C=[String,Array],G=[String,e.Color,Number],D=[String,e.Vector2],P=[String,e.Vector3],T=[String,e.Euler],B=[String,e.Quaternion],E=[String,e.Spherical],I=[String,Array],z=[String,Array],U=[String,Array];function $(t){return!Number.isNaN(parseFloat(t))}function q(t){return!Number.isNaN(parseInt(t,10))}function H(t){return/^\s*\S+\s*$/.test(t)}function W(t){return Array.isArray(t)?t.every(H):/\S+/.test(t)}function Q(t){if(t instanceof e.Vector2)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 2===i.length&&i.every($)}function _(t){if(t instanceof e.Vector3)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===i.length&&i.every($)}function K(t){return(Array.isArray(t)?t:t.split(",")).every($)}function X(t){return(Array.isArray(t)?t:t.split(",")).every(Q)}var Y={props:{position:{type:P,validator:_},rotation:{type:T,validator:function(t){if(t instanceof e.Euler)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===i.length&&i.slice(0,3).every($)&&/[XYZ]{3}/.test(i[3])}},rotationQuaternion:{type:B,validator:function(t){if(t instanceof e.Quaternion)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 4===i.length&&i.every($)}},scale:{type:P,validator:_},castShadow:L,receiveShadow:L,name:{type:R,validator:H},hidden:L},inject:{vglObject3d:{default:function(){return new v}},vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},provide:function(){var t=this;return{vglObject3d:new v(this.vglObject3d,(function(){return t.inst}))}},computed:{inst:function(){return new e.Object3D},parent:function(){return this.vglObject3d.inst()}},methods:{emitAsObject3d:function(){this.vglNamespace.object3ds.emit(this.name,this.inst)}},beforeDestroy:function(){this.inst.parent&&this.inst.parent.remove(this.inst),void 0!==this.name&&(this.vglObject3d.unlisten(this.emitAsObject3d),this.vglNamespace.object3ds.delete(this.name,this.inst))},watch:{inst:{handler:function(t,e){e&&e.parent&&e.parent.remove(e),this.parent&&this.parent.add(t),this.position&&t.position.copy(S(this.position)),this.rotation&&t.rotation.copy(F(this.rotation)),this.rotationQuaternion&&t.quaternion.copy(j(this.rotationQuaternion)),this.scale&&t.scale.copy(S(this.scale)),Object.assign(t,{castShadow:this.castShadow,receiveShadow:this.receiveShadow,visible:!this.hidden,name:this.name}),void 0!==this.name&&this.vglNamespace.object3ds.set(this.name,t),e&&this.vglObject3d.emit()},immediate:!0},parent:function(t){t.add(this.inst)},name:[function(t){this.inst.name=t},{handler:function(t,e){void 0!==e&&(this.vglNamespace.object3ds.delete(e,this.inst),void 0===t&&this.vglObject3d.unlisten(this.emitAsObject3d)),void 0!==t&&(this.vglNamespace.object3ds.set(t,this.inst),void 0===e&&this.vglObject3d.listen(this.emitAsObject3d))},immediate:!0}],position:function(t){this.inst.position.copy(S(t)),this.vglObject3d.emit()},rotation:function(t){this.inst.rotation.copy(F(t)),this.vglObject3d.emit()},rotationQuaternion:function(t){this.inst.quaternion.copy(j(t)),this.vglObject3d.emit()},scale:function(t){this.inst.scale.copy(S(t)),this.vglObject3d.emit()},castShadow:function(t){this.inst.castShadow=t,this.vglObject3d.emit()},receiveShadow:function(t){this.inst.receiveShadow=t,this.vglObject3d.emit()},hidden:function(t){this.inst.visible=!t,this.vglObject3d.emit()}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},Z={mixins:[Y],props:{fog:[String,e.Fog],backgroundColor:k,backgroundTexture:{type:R,validator:H},name:{type:R,required:!0,validator:H}},computed:{inst:function(){return new e.Scene}},methods:{setBackgroundTexture:function(t){this.inst.background=t||null,this.vglObject3d.emit()},emitAsScene:function(){this.vglNamespace.scenes.emit(this.name,this.inst)}},created:function(){this.vglObject3d.listen(this.emitAsScene)},beforeDestroy:function(){void 0!==this.backgroundTexture&&this.vglNamespace.textures.unlisten(this.backgroundTexture,this.setBackgroundTexture),this.vglNamespace.scenes.delete(this.name,this.inst),this.vglObject3d.unlisten(this.emitAsScene)},watch:{inst:{handler:function(t){void 0!==this.fog&&(this.inst.fog=A(this.fog)),void 0!==this.backgroundColor&&(this.inst.background=b(this.backgroundColor)),void 0!==this.backgroundTexture&&this.setBackgroundTexture(this.vglNamespace.textures.get(this.backgroundTexture)),this.vglNamespace.scenes.set(this.name,t)},immediate:!0},name:function(t,e){this.vglNamespace.scenes.delete(e,this.inst),this.vglNamespace.scenes.set(t,this.inst)},fog:function(t){this.inst.fog=A(t),this.vglObject3d.emit()},backgroundColor:function(t){this.inst.background=b(t),this.vglObject3d.emit()},backgroundTexture:{handler:function(t,e){void 0!==e&&this.vglNamespace.textures.unlisten(e,this.setBackgroundTexture),void 0!==t&&(this.vglNamespace.textures.listen(t,this.setBackgroundTexture),this.setBackgroundTexture(this.vglNamespace.textures.get(t)))},immediate:!0}}},J={mixins:[Y],props:{orbitTarget:{type:P,validator:_},orbitPosition:{type:E,validator:function(t){if(t instanceof e.Spherical)return!0;var i=Array.isArray(t)?t:t.trim().split(/\s+/);return 3===i.length&&i.every($)}},name:{type:R,required:!0,validator:H}},computed:{inst:function(){return new e.Camera}},methods:{emitAsCamera:function(){this.vglNamespace.cameras.emit(this.name,this.inst)}},created:function(){this.vglObject3d.listen(this.emitAsCamera)},beforeDestroy:function(){this.vglObject3d.unlisten(this.emitAsCamera),this.vglNamespace.cameras.delete(this.name,this.inst)},watch:{inst:{handler:function(t){var i;(this.orbitPosition||this.orbitTarget)&&(this.orbitTarget&&(i=S(this.orbitTarget)),this.orbitPosition&&(t.position.setFromSpherical(N(this.orbitPosition)),i&&t.position.add(i)),t.lookAt(i||new e.Vector3));this.vglNamespace.cameras.set(this.name,t)},immediate:!0},name:function(t,e){this.vglNamespace.cameras.delete(e,this.inst),this.vglNamespace.cameras.set(t,this.inst)},orbitTarget:function(t){var e=S(t);this.orbitPosition&&this.inst.position.setFromSpherical(N(this.orbitPosition)).add(e),this.inst.lookAt(e),this.vglObject3d.emit()},orbitPosition:function(t){if(this.inst.position.setFromSpherical(N(t)),this.orbitTarget){var i=S(this.orbitTarget);this.inst.position.add(i),this.inst.lookAt(i)}else this.inst.lookAt(new e.Vector3);this.vglObject3d.emit()}}};function tt(t,e,i){if(t.isPerspectiveCamera)Object.assign(t,{aspect:e/i});else{if(!t.isOrthographicCamera)throw new TypeError("Unknown camera type.");Object.assign(t,{left:-e/2,right:e/2,top:i/2,bottom:-i/2})}t.updateProjectionMatrix()}var et={mixins:[g],props:{camera:{type:R,required:!0,validator:H},scene:{type:R,required:!0,validator:H},alpha:L,disablePremultipliedAlpha:L,antialias:L,disableStencil:L,preserveDrawingBuffer:L,disableDepth:L,logarithmicDepthBuffer:L,shadowMapEnabled:L,precision:{type:k,validator:function(t){return/^(highp|mediump|lowp)$/.test(t)}},powerPreference:{type:k,validator:function(t){return/^(high-performance|low-power|default)$/.test(t)}}},computed:{inst:function(){var t=new e.WebGLRenderer({precision:this.precision,alpha:this.alpha,premultipliedAlpha:!this.disablePremultipliedAlpha,antialias:this.antialias,stencil:!this.disableStencil,preserveDrawingBuffer:this.preserveDrawingBuffer,depth:!this.disableDepth,logarithmicDepthBuffer:this.logarithmicDepthBuffer,powerPreference:this.powerPreference});return t.shadowMap.enabled=this.shadowMapEnabled,t}},methods:{setCameraRef:function(t){this.cameraRef=t,this.$el&&(t&&tt(t,this.$el.clientWidth,this.$el.clientHeight),this.requestRender(t&&this.sceneRef))},setSceneRef:function(t){this.sceneRef=t,this.$el&&this.requestRender(t&&this.cameraRef)},setFallbackCamera:function(t){var e=t.keys();this.setCameraRef(1===e.length?t.get(e[0]):void 0)},setFallbackScene:function(t){var e=t.keys();this.setSceneRef(1===e.length?t.get(e[0]):void 0)},requestRender:function(){var t=this;this.reservation||this.$nextTick((function(){if(t.reservation>0)t.inst.render(t.sceneRef,t.cameraRef);else{if(!t.cameraRef&&t.vglNamespace.cameras.keys().length){if(void 0===t.camera){var e=t.vglNamespace.cameras.keys().length;throw new ReferenceError("Cannot identify the camera. Multiple(".concat(e,") cameras are defined but camera prop is not given."))}throw new ReferenceError("Cannot identify the camera. The camera named ".concat(t.camera," is not defined."))}if(!t.sceneRef&&t.vglNamespace.scenes.keys().length){if(void 0===t.scene){var i=t.vglNamespace.cameras.keys().length;throw new ReferenceError("Cannot identify the scene. Multiple(".concat(i,") scenes are defined but scene prop is not given."))}throw new ReferenceError("Cannot identify the scene. The scene named ".concat(t.scene," is not defined."))}}t.reservation=0})),this.reservation=!arguments.length||(arguments.length<=0?void 0:arguments[0])?1:-1}},mounted:function(){this.inst.setSize(this.$el.clientWidth,this.$el.clientHeight),this.$el.appendChild(this.inst.domElement),this.cameraRef&&tt(this.cameraRef,this.$el.clientWidth,this.$el.clientHeight),this.requestRender(this.cameraRef&&this.sceneRef)},beforeDestroy:function(){void 0===this.camera?this.vglNamespace.cameras.unlisten(this.setFallbackCamera):this.vglNamespace.cameras.unlisten(this.camera,this.setCameraRef),void 0===this.scene?this.vglNamespace.scenes.unlisten(this.setFallbackScene):this.vglNamespace.scenes.unlisten(this.scene,this.setSceneRef),this.inst.dispose()},watch:{inst:function(t,e){this.$el&&(t.setSize(this.$el.clientWidth,this.$el.clientHeight),this.$el.replaceChild(t.domElement,e.domElement),this.cameraRef&&this.sceneRef&&this.requestRender()),e.dispose()},camera:{handler:function(t,e){void 0===e?this.vglNamespace.cameras.unlisten(this.setFallbackCamera):this.vglNamespace.cameras.unlisten(e,this.setCameraRef),void 0===t?(this.vglNamespace.cameras.listen(this.setFallbackCamera),this.setFallbackCamera(this.vglNamespace.cameras)):(this.vglNamespace.cameras.listen(t,this.setCameraRef),this.setCameraRef(this.vglNamespace.cameras.get(t)))},immediate:!0},scene:{handler:function(t,e){void 0===e?this.vglNamespace.scenes.unlisten(this.setFallbackScene):this.vglNamespace.scenes.unlisten(e,this.setSceneRef),void 0===t?(this.vglNamespace.scenes.listen(this.setFallbackScene),this.setFallbackScene(this.vglNamespace.scenes)):(this.vglNamespace.scenes.listen(t,this.setSceneRef),this.setSceneRef(this.vglNamespace.scenes.get(t)))},immediate:!0}},render:function(t){var e=this;return t("div",[t("iframe",{style:{visibility:"hidden",width:"100%",height:"100%",marginRight:"-100%",border:"none"},on:{load:function(t){t.target.contentWindow.addEventListener("resize",(function(){e.inst.setSize(e.$el.clientWidth,e.$el.clientHeight),e.cameraRef&&(tt(e.cameraRef,e.$el.clientWidth,e.$el.clientHeight),e.sceneRef&&e.requestRender())}),!1)}}},this.$slots.default)])}},it={mixins:[J],props:{zoom:{type:M,default:1},near:{type:M,default:.1},far:{type:M,default:2e3},fov:{type:M,default:50}},computed:{inst:function(){return new e.PerspectiveCamera}},watch:{inst:{handler:function(t){Object.assign(t,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far),fov:parseFloat(this.fov)})},immediate:!0},zoom:function(t){this.inst.zoom=parseFloat(t),this.vglObject3d.emit()},near:function(t){this.inst.near=parseFloat(t),this.vglObject3d.emit()},far:function(t){this.inst.far=parseFloat(t),this.vglObject3d.emit()},fov:function(t){this.inst.fov=parseFloat(t),this.vglObject3d.emit()}}},st={mixins:[Y],computed:{inst:function(){return new e.Group}}},nt={mixins:[Y],props:{color:{type:G,default:"#fff"},intensity:{type:M,default:1}},computed:{inst:function(){return new e.Light}},watch:{inst:{handler:function(t){t.color.setStyle(this.color),Object.assign(t,{intensity:parseFloat(this.intensity)})},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.vglObject3d.emit()},intensity:function(t){this.inst.intensity=parseFloat(t),this.vglObject3d.emit()}}},at={mixins:[nt],computed:{inst:function(){return new e.DirectionalLight}}},rt={mixins:[nt],computed:{inst:function(){return new e.AmbientLight}}},ot={front:e.FrontSide,back:e.BackSide,double:e.DoubleSide},lt={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:R,required:!0,validator:H},side:{type:k,default:"front"},vertexColors:{type:L}},computed:{inst:function(){return new e.Material}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.materials.emit(this.name,this.inst)}},watch:{inst:{handler:function(t){t.setValues({side:ot[this.side],vertexColors:this.vertexColors}),this.vglNamespace.materials.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.materials.delete(e,this.inst),void 0!==t&&this.vglNamespace.materials.set(t,this.inst)},side:function(t){this.inst.side=ot[t],this.update()},vertexColors:function(t){this.inst.vertexColors=t,this.update()}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.materials.delete(this.name,this.inst)},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},ht={mixins:[lt],props:{color:{type:G,default:"#fff"},size:{type:M,default:1},disableSizeAttenuation:L},computed:{inst:function(){return new e.PointsMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{size:parseFloat(this.size),sizeAttenuation:!this.disableSizeAttenuation}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},size:function(t){this.inst.size=parseFloat(t),this.update()},disableSizeAttenuation:function(t){this.inst.sizeAttenuation=!t,this.update()}}},ct={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:R,required:!0,validator:H},positionAttribute:{type:I,validator:K},colorAttribute:{type:I,validator:K},normalAttribute:{type:I,validator:K}},computed:{inst:function(){return new e.BufferGeometry}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.geometries.emit(this.name,this.inst)}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.geometries.delete(this.name,this.inst),this.inst.dispose()},watch:{inst:{handler:function(t,i){if(this.positionAttribute){var s=i?i.getAttribute("position"):new e.BufferAttribute(new Float32Array(x(this.positionAttribute)),3);t.setAttribute("position",s)}if(this.colorAttribute){var n=i?i.getAttribute("color"):new e.BufferAttribute(new Float32Array(x(this.colorAttribute)),3);t.setAttribute("color",n)}if(this.normalAttribute){var a=i?i.getAttribute("normal"):new e.BufferAttribute(new Float32Array(x(this.normalAttribute)),3);t.setAttribute("normal",a)}i&&i.dispose(),this.vglNamespace.geometries.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.geometries.delete(e,this.inst),void 0!==t&&this.vglNamespace.geometries.set(t,this.inst)},positionAttribute:function(t){var i=x(t),s=this.inst.getAttribute("position");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("position",s)}s.needsUpdate=!0,this.update()},colorAttribute:function(t){var i=x(t),s=this.inst.getAttribute("color");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("color",s)}s.needsUpdate=!0,this.update()},normalAttribute:function(t){var i=x(t),s=this.inst.getAttribute("normal");if(s.array.length===i.length)s.copyArray(i);else{var n=s.version;(s=new e.BufferAttribute(new Float32Array(i),3)).version=n,this.inst.setAttribute("normal",s)}s.needsUpdate=!0,this.update()}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},ut={mixins:[ct],props:{radius:{type:M,default:1},widthSegments:{type:V,default:8},heightSegments:{type:V,default:6},phiStart:{type:M,default:0},phiLength:{type:M,default:2*Math.PI},thetaStart:{type:M,default:0},thetaLength:{type:M,default:Math.PI}},computed:{inst:function(){return new e.SphereBufferGeometry(parseFloat(this.radius),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseFloat(this.phiStart),parseFloat(this.phiLength),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},pt={mixins:[Y],methods:{setMaterial:function(){var t=this.vglNamespace.materials,e=this.inst,i=y(this.material).reduce((function(e,i){return t.get(i)?[].concat(p(e),[t.get(i)]):e}),[]);e.material=1===i.length?i[0]:i,this.vglObject3d.emit()}},watch:{inst:function(){void 0!==this.material&&this.setMaterial()},material:{handler:function(t,e){var i=this.vglNamespace.materials,s=this.setMaterial;void 0!==e&&y(e).forEach((function(t){return i.unlisten(t,s)})),void 0!==t&&(y(t).forEach((function(t){return i.listen(t,s)})),s())},immediate:!0}},beforeDestroy:function(){var t=this.vglNamespace.materials,e=this.material,i=this.setMaterial;y(e).forEach((function(e){return t.unlisten(e,i)}))}},dt={mixins:[pt],methods:{setGeometry:function(t){t&&(this.inst.geometry=t,this.vglObject3d.emit(),void 0!==this.name&&this.vglNamespace.object3ds.emit(this.name,this.inst))}},watch:{inst:function(){void 0!==this.geometry&&this.setGeometry(this.vglNamespace.geometries.get(this.geometry))},geometry:{handler:function(t,e){var i=this.vglNamespace.geometries,s=this.setGeometry;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(i.get(t)))},immediate:!0}},beforeDestroy:function(){this.vglNamespace.geometries.unlisten(this.geometry,this.setGeometry)}},ft={mixins:[lt],methods:{setMap:function(){var t=this.vglNamespace.textures,e=this.inst,i=this.map;t.keys().includes(i)&&(e.map=t.get(i)),this.vglNamespace.materials.emit(this.name,e)}},watch:{inst:function(){void 0!==this.map&&this.setMap(this.vglNamespace.textures.get(this.map))},map:{handler:function(t,e){var i=this.vglNamespace.textures,s=this.setMap;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(i.get(t)))},immediate:!0}},beforeDestroy:function(){this.vglNamespace.textures.unlisten(this.map,this.setMap)}},mt={mixins:[ct],data:function(){return{shapeNames:[]}},computed:{shapeObjects:function(){var t=this;return this.shapeNames.map((function(e){var i=u(e,1)[0];return t.vglNamespace.curves.get(i)}))}},methods:{setShapeNames:function(){var t=this,e=y(this.shapes);this.shapeNames=e.map((function(e){return[e,t.vglNamespace.curves.get(e).uuid]})),this.update()}},beforeDestroy:function(){var t=this;void 0!==this.shapes&&y(this.shapes).forEach((function(e){t.vglNamespace.curves.unlisten(e,t.setShapeUuids)}))},watch:{shapes:{handler:function(t,e){var i=this,s=void 0===e?[]:y(e),n=void 0===t?[]:y(t);s.forEach((function(t){n.includes(t)||i.vglNamespace.curves.unlisten(t,i.setShapeNames)})),n.forEach((function(t){s.includes(t)||i.vglNamespace.curves.listen(t,i.setShapeNames)})),void 0!==t&&this.setShapeNames()},immediate:!0}}},gt={mixins:[ft],props:{color:{type:G,default:"#fff"},map:{type:R,validator:H}},computed:{inst:function(){return new e.MeshStandardMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},vt={mixins:[dt],props:{geometry:{type:R,validator:H},material:{type:C,validator:W}},computed:{inst:function(){return new e.Mesh}}},yt={mixins:[dt],props:{geometry:{type:R,validator:H},material:{type:R,validator:H}},computed:{inst:function(){return new e.Points}}},bt={mixins:[lt],props:{color:{type:G,default:"#fff"},linewidth:{type:M,default:1},linecap:{type:k,default:"round",validator:function(t){return/^(butt|round|square)$/.test(t)}},linejoin:{type:k,default:"round",validator:function(t){return/^(round|bevel|miter)$/.test(t)}}},computed:{inst:function(){return new e.LineBasicMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{linecap:this.linecap,linejoin:this.linejoin,linewidth:parseFloat(this.linewidth)}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},linecap:function(t){this.inst.linecap=t,this.update()},linejoin:function(t){this.inst.linejoin=t,this.update()}}},wt={mixins:[dt],props:{geometry:{type:R,validator:H},material:{type:R,validator:H}},computed:{inst:function(){return new e.Line}},methods:{computeLineDistances:function(){this.inst.material.isLineDashedMaterial&&this.inst.computeLineDistances()}},beforeDestroy:function(){void 0!==this.geometry&&this.vglNamespace.geometries.unlisten(this.geometry,this.computeLineDistances),void 0!==this.material&&this.vglNamespace.materials.unlisten(this.material,this.computeLineDistances)},watch:{geometry:{handler:function(t,e){void 0!==e&&this.vglNamespace.geometries.unlisten(e,this.computeLineDistances),void 0!==t&&(this.vglNamespace.geometries.listen(t,this.computeLineDistances),this.computeLineDistances())},immediate:!0},material:{handler:function(t,e){void 0!==e&&this.vglNamespace.materials.unlisten(e,this.computeLineDistances),void 0!==t&&(this.vglNamespace.materials.listen(t,this.computeLineDistances),this.computeLineDistances())},immediate:!0}}},St={mixins:[pt],props:{material:{type:R,validator:H}},computed:{inst:function(){return new e.Sprite}}},Ft={mixins:[ct],props:{width:{type:M,default:1},height:{type:M,default:1},depth:{type:M,default:1},widthSegments:{type:V,default:1},heightSegments:{type:V,default:1},depthSegments:{type:V,default:1}},computed:{inst:function(){return new e.BoxBufferGeometry(parseFloat(this.width),parseFloat(this.height),parseFloat(this.depth),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10),parseInt(this.depthSegments,10))}}},jt={mixins:[ct],props:{radius:{type:M,default:1},segments:{type:V,default:8},thetaStart:{type:M,default:0},thetaLength:{type:M,default:2*Math.PI}},computed:{inst:function(){return new e.CircleBufferGeometry(parseFloat(this.radius),parseInt(this.segments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Nt={mixins:[wt],computed:{inst:function(){return new e.LineSegments}}},xt={mixins:[wt],computed:{inst:function(){return new e.LineLoop}}},Ot={mixins:[ct],props:{radiusTop:{type:M,default:1},radiusBottom:{type:M,default:1},height:{type:M,default:1},radialSegments:{type:V,default:8},heightSegments:{type:V,default:1},openEnded:L,thetaStart:{type:M,default:0},thetaLength:{type:M,default:2*Math.PI}},computed:{inst:function(){return new e.CylinderBufferGeometry(parseFloat(this.radiusTop),parseFloat(this.radiusBottom),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},At={mixins:[Ot],props:{radius:{type:M,default:1}},computed:{inst:function(){return new e.ConeBufferGeometry(parseFloat(this.radius),parseFloat(this.height),parseInt(this.radialSegments,10),parseInt(this.heightSegments,10),this.openEnded,parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Lt={mixins:[Y],props:{size:{type:M,default:1}},computed:{inst:function(){return new e.AxesHelper(parseFloat(this.size))}}},Vt={mixins:[J],props:{zoom:{type:M,default:1},near:{type:M,default:.1},far:{type:M,default:2e3}},computed:{inst:function(){return new e.OrthographicCamera}},watch:{inst:{handler:function(t){Object.assign(t,{zoom:parseFloat(this.zoom),near:parseFloat(this.near),far:parseFloat(this.far)})},immediate:!0},zoom:function(t){this.inst.zoom=parseFloat(t),this.vglObject3d.emit()},near:function(t){this.inst.near=parseFloat(t),this.vglObject3d.emit()},far:function(t){this.inst.far=parseFloat(t),this.vglObject3d.emit()}}},Mt={mixins:[ct],props:{width:{type:M,default:1},height:{type:M,default:1},widthSegments:{type:V,default:1},heightSegments:{type:V,default:1}},computed:{inst:function(){return new e.PlaneBufferGeometry(parseFloat(this.width),parseFloat(this.height),parseInt(this.widthSegments,10),parseInt(this.heightSegments,10))}}},kt={mixins:[ct],props:{radius:{type:M,default:1},detail:{type:V,default:0}},computed:{inst:function(){return new e.DodecahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Rt={mixins:[ct],props:{radius:{type:M,default:1},detail:{type:V,default:0}},computed:{inst:function(){return new e.IcosahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Ct={mixins:[ct],props:{radius:{type:M,default:1},detail:{type:V,default:0}},computed:{inst:function(){return new e.OctahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Gt={mixins:[ct],props:{innerRadius:{type:M,default:.5},outerRadius:{type:M,default:1},thetaSegments:{type:V,default:8},phiSegments:{type:V,default:1},thetaStart:{type:M,default:0},thetaLength:{type:M,default:2*Math.PI}},computed:{inst:function(){return new e.RingBufferGeometry(parseFloat(this.innerRadius),parseFloat(this.outerRadius),parseInt(this.thetaSegments,10),parseInt(this.phiSegments,10),parseFloat(this.thetaStart),parseFloat(this.thetaLength))}}},Dt={mixins:[ct],props:{radius:{type:M,default:1},detail:{type:V,default:0}},computed:{inst:function(){return new e.TetrahedronBufferGeometry(parseFloat(this.radius),parseInt(this.detail,10))}}},Pt={mixins:[ct],props:{radius:{type:M,default:1},tube:{type:M,default:.4},radialSegments:{type:V,default:8},tubularSegments:{type:V,default:6},arc:{type:M,default:2*Math.PI}},computed:{inst:function(){return new e.TorusBufferGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.radialSegments,10),parseInt(this.tubularSegments,10),parseFloat(this.arc))}}},Tt={mixins:[ct],props:{radius:{type:M,default:1},tube:{type:M,default:.4},radialSegments:{type:V,default:8},tubularSegments:{type:V,default:64},p:{type:V,default:2},q:{type:V,default:3}},computed:{inst:function(){return new e.TorusKnotBufferGeometry(parseFloat(this.radius),parseFloat(this.tube),parseInt(this.tubularSegments,10),parseInt(this.radialSegments,10),parseInt(this.p,10),parseInt(this.q,10))}}},Bt={mixins:[Y],props:{dir:{type:P,validator:_},length:{type:M,default:1},color:{type:G,default:"#ff0"},headLength:M,headWidth:M},computed:{inst:function(){return new e.ArrowHelper(new e.Vector3(0,1,0),new e.Vector3)},len:function(){return[parseFloat(this.length),void 0!==this.headLength?parseFloat(this.headLength):void 0,void 0!==this.headWidth?parseFloat(this.headWidth):void 0]}},watch:{inst:{handler:function(t){this.dir&&t.setDirection(S(this.dir).normalize()),t.setLength.apply(t,p(this.len)),t.setColor(new e.Color(this.color))},immediate:!0},dir:function(t){this.inst.setDirection(S(t).normalize()),this.vglObject3d.emit()},len:function(t){var e;(e=this.inst).setLength.apply(e,p(t)),this.vglObject3d.emit()},color:function(t){this.inst.setColor(new e.Color(t)),this.vglObject3d.emit()}}},Et={mixins:[Y],props:{color:{type:G,default:"#ff0"},object:{type:R,required:!0,validator:H}},computed:{inst:function(){return new e.BoxHelper(void 0,this.color)}},methods:{setFromObject:function(t){this.inst.setFromObject(t)}},beforeDestroy:function(){void 0!==this.object&&this.vglNamespace.object3ds.unlisten(this.object,this.setFromObject)},watch:{inst:function(){void 0!==this.object&&this.setFromObject(this.vglNamespace.object3ds.get(this.object))},object:{handler:function(t,e){var i=this.vglNamespace.object3ds,s=this.setFromObject;void 0!==e&&i.unlisten(e,s),void 0!==t&&(i.listen(t,s),s(this.vglNamespace.object3ds.get(t)))},immediate:!0}}},It={mixins:[nt],props:{distance:{type:M,default:0},decay:{type:M,default:1}},computed:{inst:function(){return new e.PointLight}},watch:{inst:{handler:function(t){Object.assign(t,{distance:parseFloat(this.distance),decay:parseFloat(this.decay)})},immediate:!0},distance:function(t){this.inst.distance=parseFloat(t),this.vglObject3d.emit()},decay:function(t){this.inst.decay=parseFloat(t),this.vglObject3d.emit()}}},zt={mixins:[nt],props:{distance:{type:M,default:0},decay:{type:M,default:1},angle:{type:M,default:Math.PI/3},penumbra:{type:M,default:0},target:{type:P,validator:_}},computed:{inst:function(){return new e.SpotLight}},beforeDestroy:function(){this.inst.target.parent&&this.inst.target.parent.remove(this.inst.target)},watch:{inst:{handler:function(t){Object.assign(t,{distance:parseFloat(this.distance),decay:parseFloat(this.decay),angle:parseFloat(this.angle),penumbra:parseFloat(this.penumbra)}),this.target&&t.target.position.copy(S(this.target)),this.parent&&this.parent.add(t.target)},immediate:!0},parent:function(t){t.add(this.inst.target)},distance:function(t){this.inst.distance=parseFloat(t),this.vglObject3d.emit()},decay:function(t){this.inst.decay=parseFloat(t),this.vglObject3d.emit()},angle:function(t){this.inst.angle=parseFloat(t),this.vglObject3d.emit()},penumbra:function(t){this.inst.penumbra=parseFloat(t),this.vglObject3d.emit()},target:function(t){this.inst.target.position.copy(S(t)),this.vglObject3d.emit()}}},Ut={uv:e.UVMapping,"cube-reflection":e.CubeReflectionMapping,"cube-refraction":e.CubeRefractionMapping,"equirectangular-reflection":e.EquirectangularReflectionMapping,"equirectangular-refraction":e.EquirectangularRefractionMapping,"spherical-reflection":e.SphericalReflectionMapping,"cube-uv-reflection":e.CubeUVReflectionMapping,"cube-uv-refraction":e.CubeUVRefractionMapping},$t={repeat:e.RepeatWrapping,"clamp-to-edge":e.ClampToEdgeWrapping,"mirrored-repeat":e.MirroredRepeatWrapping},qt={nearest:e.NearestFilter,"nearest-mip-map-nearest":e.NearestMipMapNearestFilter,"nearest-mip-map-linear":e.NearestMipMapLinearFilter,linear:e.LinearFilter,"linear-mip-map-nearest":e.LinearMipMapNearestFilter,"linear-mip-map-linear":e.LinearMipMapLinearFilter},Ht={alpha:e.AlphaFormat,rgb:e.RGBFormat,rgba:e.RGBAFormat,luminance:e.LuminanceFormat,"luminance-alpha":e.LuminanceAlphaFormat,rgbe:e.RGBEFormat,depth:e.DepthFormat,"depth-stencil":e.DepthStencilFormat},Wt={"unsigned-byte":e.UnsignedByteType,byte:e.ByteType,short:e.ShortType,"unsigned-short":e.UnsignedShortType,int:e.IntType,"unsigned-int":e.UnsignedIntType,float:e.FloatType,"half-float":e.HalfFloatType,"unsigned-short-4444":e.UnsignedShort4444Type,"unsigned-short-5551":e.UnsignedShort5551Type,"unsigned-short-565":e.UnsignedShort565Type,"unsigned-int-248":e.UnsignedInt248Type},Qt={linear:e.LinearEncoding,"s-rgb":e.sRGBEncoding,gamma:e.GammaEncoding,rgbe:e.RGBEEncoding,"log-luv":e.LogLuvEncoding,rgbm7:e.RGBM7Encoding,rgbm16:e.RGBM16Encoding,rgbde:e.RGBDEncoding,"basic-depth":e.BasicDepthPacking,"rgba-depth":e.RGBADepthPacking},_t={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{src:k,name:{type:R,required:!0,validator:H},mapping:{type:k,default:"uv"},wrapS:{type:k,default:"clamp-to-edge"},wrapT:{type:k,default:"clamp-to-edge"},magFilter:{type:k,default:"linear"},minFilter:{type:k,default:"linear-mip-map-linear"},anisotropy:{type:V,default:1},format:k,type:{type:k,default:"unsigned-byte"},offset:{type:D,validator:Q},repeat:{type:D,validator:Q},rotation:{type:M,default:0},center:{type:D,validator:Q},premultiplyAlpha:L,unpackAlignment:{type:V,default:4},encoding:{type:k,default:"linear"}},computed:{inst:function(){var t=this;return(new e.TextureLoader).load(this.src,(function(e){t.format&&Object.assign(e,{format:Ht[t.format]}),t.update()}))}},methods:{update:function(){void 0!==this.name&&this.vglNamespace.textures.emit(this.name,this.inst)}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.textures.delete(this.name,this.inst)},watch:{inst:{handler:function(t){Object.assign(t,{mapping:Ut[this.mapping],wrapS:$t[this.wrapS],wrapT:$t[this.wrapT],magFilter:qt[this.magFilter],minFilter:qt[this.minFilter],anisotropy:parseInt(this.anisotropy,10),type:Wt[this.type],rotation:parseFloat(this.rotation),premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:parseInt(this.unpackAlignment,10),encoding:Qt[this.encoding]}),this.offset&&t.offset.copy(w(this.offset)),this.repeat&&t.repeat.copy(w(this.repeat)),this.center&&t.center.copy(w(this.center)),void 0!==this.name&&this.vglNamespace.textures.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.textures.delete(e,this.inst),void 0!==t&&this.vglNamespace.textures.set(t,this.inst)},mapping:function(t){this.inst.mapping=Ut[t],this.update()},wrapS:function(t){this.inst.wrapS=$t[t],this.update()},wrapT:function(t){this.inst.wrapT=$t[t],this.update()},magFilter:function(t){this.inst.magFilter=qt[t],this.update()},minFilter:function(t){this.inst.minFilter=qt[t],this.update()},anisotropy:function(t){this.inst.anisotropy=parseInt(t,10),this.update()},format:function(t){this.inst.format=Ht[t],this.update()},type:function(t){this.inst.type=Wt[t],this.update()},offset:function(t){this.inst.offset.copy(w(t)),this.update()},repeat:function(t){this.inst.repeat.copy(w(t)),this.update()},rotation:function(t){this.inst.rotation=parseFloat(t),this.update()},center:function(t){this.inst.center.copy(w(t)),this.update()},premultiplyAlpha:function(t){this.inst.premultiplyAlpha=t,this.update()},unpackAlignment:function(t){this.inst.unpackAlignment=parseInt(t,10),this.update()},encoding:function(t){this.inst.encoding=Qt[t],this.update()}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},Kt={mixins:[mt],props:{shapes:{type:C,validator:W},curveSegments:V,steps:V,depth:M,bevelEnabled:L,bevelThickness:M,bevelSize:M,bevelOffset:M,bevelSegments:V,extrudePath:Object,uvGenerator:Object},computed:{options:function(){var t=this.curveSegments,e=this.steps,i=this.depth,s=this.bevelEnabled,n=this.bevelThickness,a=this.bevelSize,r=this.bevelOffset,l=this.bevelSegments,h=this.extrudePath,c=this.uvGenerator;return o(o(o(o(o(o(o(o(o(o({},null!=t&&{curveSegments:parseInt(t,10)}),null!=e&&{steps:parseInt(e,10)}),null!=i&&{depth:parseFloat(i)}),null!=s&&{bevelEnabled:s}),null!=n&&{bevelThickness:parseFloat(n)}),null!=a&&{bevelSize:parseFloat(a)}),null!=r&&{bevelOffset:parseFloat(r)}),null!=l&&{bevelSegments:parseInt(l,10)}),null!=h&&{extrudePath:h}),null!=c&&{UVGenerator:c})},inst:function(){return new e.ExtrudeBufferGeometry(this.shapeObjects,this.options)}}},Xt=Object.create(null),Yt={mixins:[Kt],props:{text:{type:k,default:""},font:k,size:{type:M,default:100},height:{type:M,default:50},curveSegments:{type:V,default:12},bevelEnabled:L,bevelThickness:{type:M,default:10},bevelSize:{type:M,default:8},bevelSegments:{type:V,default:3}},data:function(){return{f:void 0}},computed:{inst:function(){return void 0!==this.f?new e.TextBufferGeometry(this.text,{font:Xt[this.f],size:parseFloat(this.size),height:parseFloat(this.height),curveSegments:parseInt(this.curveSegments,10),bevelEnabled:this.bevelEnabled,bevelThickness:parseFloat(this.bevelThickness),bevelSize:parseFloat(this.bevelSize),bevelSegments:parseInt(this.bevelSegments,10)}):new e.BufferGeometry}},watch:{font:{handler:function(t){var i=this;Xt[t]?Xt[t].isFont?this.f=t:Xt[t].push((function(){t===i.font&&(i.f=t)})):(Xt[t]=[function(){t===i.font&&(i.f=t)}],(new e.FontLoader).load(t,(function(e){var s=Xt[t];Xt[t]=e,s.forEach((function(t){t()})),i.vglNamespace.geometries.emit(i.name,i.inst)}))),this.vglNamespace.geometries.emit(this.name,this.inst)},immediate:!0}}},Zt={mixins:[ft],props:{color:{type:G,default:"#fff"},map:{type:R,validator:H}},computed:{inst:function(){return new e.SpriteMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},Jt={mixins:[Y],props:{size:{type:M,default:10},divisions:{type:V,default:10},colorCenterLine:{type:G,default:"#444444"},colorGrid:{type:G,default:"#888888"}},computed:{inst:function(){return new e.GridHelper(parseFloat(this.size),parseInt(this.divisions,10),this.colorCenterLine,this.colorGrid)}}},te={mixins:[lt],computed:{inst:function(){return new e.ShadowMaterial}}},ee={mixins:[Y],props:{camera:{type:R,required:!0,validator:H}},data:function(){return{exist:!1}},computed:{inst:function(){if(!this.exist)return new e.Object3D;var t=this.vglNamespace.cameras.get(this.camera);return t.updateProjectionMatrix(),new e.CameraHelper(t)}},methods:{update:function(t){t?(this.exist=!0,t.updateProjectionMatrix(),this.inst.camera=t,this.inst.update(),this.vglObject3d.emit()):this.exist=!1}},beforeDestroy:function(){this.vglNamespace.cameras.unlisten(this.camera,this.update)},watch:{camera:{handler:function(t,e){void 0!==e&&this.vglNamespace.cameras.unlisten(e,this.update),this.vglNamespace.cameras.listen(t,this.update),this.exist=!!this.vglNamespace.cameras.get(t)},immediate:!0}}},ie={mixins:[Y],props:{color:G,size:{type:M,default:1},light:{type:R,required:!0,validator:H}},data:function(){return{lightUuid:null}},computed:{inst:function(){if(!this.lightUuid)return new e.Object3D;var t=this.vglNamespace.object3ds.get(this.light);return new e.DirectionalLightHelper(t,parseFloat(this.size))}},methods:{setLightUuid:function(t){this.lightUuid=t?t.uuid:null,this.inst.update()}},beforeDestroy:function(){void 0!==this.light&&this.vglNamespace.object3ds.unlisten(this.light,this.setLightUuid)},watch:{inst:function(t){this.lightUuid&&void 0!==this.color&&Object.assign(t,{color:this.color}).update()},light:{handler:function(t,e){if(void 0!==e&&this.vglNamespace.object3ds.unlisten(e,this.setLightUuid),void 0!==t){this.vglNamespace.object3ds.listen(t,this.setLightUuid);var i=this.vglNamespace.object3ds.get(this.light);this.setLightUuid(i)}},immediate:!0},color:{handler:function(t){this.lightUuid&&(this.inst.color=t,this.inst.update())},immediate:!0}}},se={mixins:[Y],props:{radius:{type:M,default:10},radials:{type:V,default:16},circles:{type:V,default:8},divisions:{type:V,default:64},color1:{type:G,default:"#444444"},color2:{type:G,default:"#888888"}},computed:{inst:function(){return new e.PolarGridHelper(parseFloat(this.radius),parseInt(this.radials,10),parseInt(this.circles,10),parseInt(this.divisions,10),this.color1,this.color2)}}},ne={mixins:[ft],props:{color:{type:G,default:"#fff"},map:{type:R,validator:H}},computed:{inst:function(){return new e.MeshBasicMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},ae={mixins:[ft],props:{fog:L,map:{type:R,validator:H}},computed:{inst:function(){return new e.MeshDepthMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{fog:this.fog})},immediate:!0},fog:function(t){this.inst.fog=t,this.update()}}},re={mixins:[ft],props:{color:{type:G,default:"#fff"},map:{type:R,validator:H}},computed:{inst:function(){return new e.MeshLambertMaterial}},watch:{inst:{handler:function(t){t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()}}},oe={mixins:[lt],props:{color:{type:G,default:"#fff"},linewidth:{type:M,default:1},dashSize:{type:M,default:3},gapSize:{type:M,default:1}},computed:{inst:function(){return new e.LineDashedMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{dashSize:parseFloat(this.dashSize),gapSize:parseFloat(this.gapSize),linewidth:parseFloat(this.linewidth)}),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},dashSize:function(t){this.inst.dashSize=parseFloat(t),this.update()},gapSize:function(t){this.inst.gapSize=parseFloat(t),this.update()}}},le={mixins:[lt],props:{fog:L},computed:{inst:function(){return new e.MeshNormalMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{fog:this.fog})},immediate:!0},fog:function(t){this.inst.fog=t,this.update()}}},he={mixins:[ft],props:{color:{type:G,default:"#fff"},map:{type:R,validator:H},specular:{type:G,default:"#111111"},shininess:{type:M,default:30}},computed:{inst:function(){return new e.MeshPhongMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{shininess:parseFloat(this.shininess)}),t.specular.setStyle(this.specular),t.color.setStyle(this.color)},immediate:!0},color:function(t){this.inst.color.setStyle(t),this.update()},specular:function(t){this.inst.specular.setStyle(t),this.update()},shininess:function(t){this.inst.shininess=parseFloat(t),this.update()}}},ce={mixins:[he],computed:{inst:function(){return new e.MeshToonMaterial}}},ue={mixins:[gt],props:{clearcoat:{type:M,default:0},clearcoatRoughness:{type:M,default:0},reflectivity:{type:M,default:.5}},computed:{inst:function(){return new e.MeshPhysicalMaterial}},watch:{inst:{handler:function(t){Object.assign(t,{clearcoat:parseFloat(this.clearcoat),clearcoatRoughness:parseFloat(this.clearcoatRoughness),reflectivity:parseFloat(this.reflectivity)})},immediate:!0},clearcoat:function(t){this.inst.clearcoat=parseFloat(t),this.update()},clearcoatRoughness:function(t){this.inst.clearcoatRoughness=parseFloat(t),this.update()},reflectivity:function(t){this.inst.reflectivity=parseFloat(t),this.update()}}},pe={mixins:[ft],props:{defines:{type:Object,default:function(){return{}}},fog:{type:L,default:!1},fragmentShader:{type:k},lights:{type:L,default:!1},linewidth:{type:M,default:1},flatShading:{type:L,default:!1},uniforms:{type:Object,default:function(){return{}}},vertexShader:{type:k},wireframe:{type:L,default:!1},wireframeLinewidth:{type:M,default:1}},computed:{inst:function(){return new e.ShaderMaterial({fog:this.fog,lights:this.lights})}},watch:{inst:{handler:function(t){Object.assign(t,{defines:this.defines,fog:this.fog,fragmentShader:this.fragmentShader||t.fragmentShader,lights:this.lights,linewidth:parseFloat(this.linewidth),flatShading:this.flatShading,uniforms:this.uniforms,vertexShader:this.vertexShader||t.vertexShader,wireframe:this.wireframe,wireframeLinewidth:parseFloat(this.wireframeLinewidth)})},immediate:!0},defines:{handler:function(t){this.inst.defines=t,this.update()},deep:!0},fragmentShader:function(t){this.inst.fragmentShader=t,this.update()},linewidth:function(t){this.inst.linewidth=parseFloat(t),this.update()},flatShading:function(t){this.inst.flatShading=t,this.update()},uniforms:{handler:function(t){this.inst.uniforms=t,this.update()},deep:!0},vertexShader:function(t){this.inst.vertexShader=t,this.update()},wireframe:function(t){this.inst.wireframe=t,this.update()},wireframeLinewidth:function(t){this.inst.wireframeLinewidth=parseFloat(t),this.update()}}},de={mixins:[ct],props:{points:{type:U,required:!0,validator:X},segments:{type:V,default:12},phiStart:{type:M,default:0},phiLength:{type:M,default:2*Math.PI}},computed:{inst:function(){return new e.LatheBufferGeometry(O(this.points),parseInt(this.segments,10),parseFloat(this.phiStart),parseFloat(this.phiLength))}}},fe={mixins:[Y],props:{color:G,light:{type:R,required:!0,validator:H}},data:function(){return{lightUuid:null}},computed:{inst:function(){if(!this.lightUuid)return new e.Object3D;var t=this.vglNamespace.object3ds.get(this.light);return new e.SpotLightHelper(t)}},methods:{setLightUuid:function(t){this.lightUuid=t?t.uuid:null,this.inst.update()}},beforeDestroy:function(){void 0!==this.light&&this.vglNamespace.object3ds.unlisten(this.light,this.setLightUuid)},watch:{inst:function(t){this.lightUuid&&void 0!==this.color&&Object.assign(t,{color:this.color}).update()},light:{handler:function(t,e){if(void 0!==e&&this.vglNamespace.object3ds.unlisten(e,this.setLightUuid),void 0!==t){this.vglNamespace.object3ds.listen(t,this.setLightUuid);var i=this.vglNamespace.object3ds.get(this.light);this.setLightUuid(i)}},immediate:!0},color:{handler:function(t){this.lightUuid&&(this.inst.color=t,this.inst.update())},immediate:!0}}},me={mixins:[nt],props:{groundColor:{type:G,default:"#fff"}},computed:{inst:function(){return new e.HemisphereLight}},watch:{inst:{handler:function(t){t.groundColor.setStyle(this.groundColor)},immediate:!0},groundColor:function(t){this.inst.groundColor.setStyle(t),this.vglObject3d.emit()}}},ge={mixins:[nt],props:{width:{type:M,default:10},height:{type:M,default:10}},computed:{inst:function(){return new e.RectAreaLight}},watch:{inst:{handler:function(t){Object.assign(t,{width:parseFloat(this.width),height:parseFloat(this.height)})},immediate:!0},width:function(t){this.inst.width=parseFloat(t),this.vglObject3d.emit()},height:function(t){this.inst.height=parseFloat(t),this.vglObject3d.emit()}}},ve={inject:{vglNamespace:{default:function(){throw new Error("VueGL components must be wraped by VglNamespace component.")}}},props:{name:{type:R,required:!0,validator:H}},computed:{inst:function(){return new e.Curve}},beforeDestroy:function(){void 0!==this.name&&this.vglNamespace.curves.delete(this.name,this.inst)},watch:{inst:{handler:function(t){void 0!==this.name&&this.vglNamespace.curves.set(this.name,t)},immediate:!0},name:function(t,e){void 0!==e&&this.vglNamespace.curves.delete(e,this.inst),void 0!==t&&this.vglNamespace.curves.set(t,this.inst)}},render:function(t){if(this.$slots.default)return t("div",{style:{display:"none"}},this.$slots.default)}},ye={mixins:[ve],props:{autoClose:L},computed:{inst:function(){return new e.CurvePath}},watch:{inst:{handler:function(t){Object.assign(t,{autoClose:this.autoClose})},immediate:!0},autoClose:function(t){this.inst.autoClose=t}}},be={mixins:[ye],props:{path:{type:U,validator:X}},computed:{inst:function(){var t=new e.Path;return void 0!==this.path&&t.setFromPoints(O(this.path)),t}}},we={mixins:[be],computed:{inst:function(){var t=new e.Shape;return void 0!==this.path&&t.setFromPoints(O(this.path)),t}}},Se={mixins:[mt],props:{shapes:{type:C,validator:W},curveSegments:{type:V,default:12}},computed:{inst:function(){return new e.ShapeBufferGeometry(this.shapeObjects,parseInt(this.curveSegments,10))}}},Fe={mixins:[ct],props:{vertices:{type:I,validator:K},indices:{type:z,validator:function(t){return(Array.isArray(t)?t:t.split(",")).every(q)}},radius:{type:M,default:1},detail:{type:V,default:0}},computed:{inst:function(){var t=x(this.vertices).map(parseFloat),i=function(t){return x(t).map((function(t){return parseInt(t,10)}))}(this.indices),s=parseFloat(this.radius),n=parseInt(this.detail,10);return new e.PolyhedronBufferGeometry(t,i,s,n)}}};t.VglAmbientLight=rt,t.VglArrowHelper=Bt,t.VglAxesHelper=Lt,t.VglBoxGeometry=Ft,t.VglBoxHelper=Et,t.VglCamera=J,t.VglCameraHelper=ee,t.VglCircleGeometry=jt,t.VglConeGeometry=At,t.VglCurve=ve,t.VglCurvePath=ye,t.VglCylinderGeometry=Ot,t.VglDirectionalLight=at,t.VglDirectionalLightHelper=ie,t.VglDodecahedronGeometry=kt,t.VglExtrudeGeometry=Kt,t.VglGeometry=ct,t.VglGridHelper=Jt,t.VglGroup=st,t.VglHemisphereLight=me,t.VglIcosahedronGeometry=Rt,t.VglLatheGeometry=de,t.VglLight=nt,t.VglLine=wt,t.VglLineBasicMaterial=bt,t.VglLineDashedMaterial=oe,t.VglLineLoop=xt,t.VglLineSegments=Nt,t.VglMaterial=lt,t.VglMesh=vt,t.VglMeshBasicMaterial=ne,t.VglMeshDepthMaterial=ae,t.VglMeshLambertMaterial=re,t.VglMeshNormalMaterial=le,t.VglMeshPhongMaterial=he,t.VglMeshPhysicalMaterial=ue,t.VglMeshStandardMaterial=gt,t.VglMeshToonMaterial=ce,t.VglNamespace=g,t.VglObject3d=Y,t.VglOctahedronGeometry=Ct,t.VglOrthographicCamera=Vt,t.VglPath=be,t.VglPerspectiveCamera=it,t.VglPlaneGeometry=Mt,t.VglPointLight=It,t.VglPoints=yt,t.VglPointsMaterial=ht,t.VglPolarGridHelper=se,t.VglPolyhedronGeometry=Fe,t.VglRectAreaLight=ge,t.VglRenderer=et,t.VglRingGeometry=Gt,t.VglScene=Z,t.VglShaderMaterial=pe,t.VglShadowMaterial=te,t.VglShape=we,t.VglShapeGeometry=Se,t.VglSphereGeometry=ut,t.VglSpotLight=zt,t.VglSpotLightHelper=fe,t.VglSprite=St,t.VglSpriteMaterial=Zt,t.VglTetrahedronGeometry=Dt,t.VglTextGeometry=Yt,t.VglTexture=_t,t.VglTorusGeometry=Pt,t.VglTorusKnotGeometry=Tt,Object.defineProperty(t,"__esModule",{value:!0})}));
